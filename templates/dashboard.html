<html>
<head>
    <title>{% block titlepage %}SacAdo - Interface de {{ request.user.first_name }} {{ request.user.last_name }} {% endblock %}</title>
    {% load bootstrap3 %}
    {% load widget_tweaks %}
    {% bootstrap_messages %}
    {% load item_tags %} 

    {% load static %}
    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap/css/bootstrap.css' %}"/>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Bootstrap Toggle -->
    <link rel="stylesheet" href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css">

    <link rel="stylesheet" href="{% static 'plugins/colorpicker/bootstrap-colorpicker.min.css' %}">

    <!-- jQuery UI -->
    <link href="{% static 'plugins/jqueryCustom/jquery-ui.min.css' %}">
    <!-- Tabs -->
    <link rel="stylesheet" href="{% static 'plugins/datatables/dataTables.bootstrap.css' %}">

    <link rel="stylesheet" href="{% static 'plugins/datepicker/datepicker3.css' %}">
 
    <link rel="stylesheet" href="{% static 'plugins/datepicker/datetimepicker.css' %}">
    <!-- Select2 -->
    <link rel="stylesheet" href="{% static 'plugins/select2/select2.min.css' %}">

    <!-- fichier personel -->

    {% block python %}
 
    {% endblock %}

    <link rel="stylesheet" href="{% static 'css/AdminLTEperso.css' %}"> 
    <link rel="stylesheet" href="{% static 'css/navbar-fixed-left.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/slide_menu.css' %}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css"
          integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,900">
 
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Amatic+SC:400,900">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
 




    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}" />   
    

    <style type="text/css">
    .modal-content {
        border-radius: 4px;
        border: none;
        padding: 0px;
        z-index: 100;
    }
    </style>


</head>
<body>

<nav class="navbarLeft navbarLeft_none  navbarLeft-fixed-left" id="navbarLeft" >
    <ul class="nav navbarLeft-nav">
        {% if request.user.is_authenticated %}
            {% if user.is_teacher %}
                {% include 'sideBarMenu/nav_T.html' %}
            {% elif user.is_parent %}
                {% include 'sideBarMenu/nav_P.html' %}
            {% else %}
                {% include 'sideBarMenu/nav_S.html' %}
            {% endif %}
        {% endif %}
    </ul>
    <ul class="nav navbarRight-nav">
    </ul>
</nav>

<div class="content-wrapper">
    <div class="content_title" id="content_title_page">
        <h1 class="thin">
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                    <div class="row">
                        <div class="navbar-header">
                        {% block page_title %}
                            <span style="color:#5d4391"><i class='fa fa-tachometer-alt'></i> Tableau de bord     </span>     
                                {% if request.user.is_authenticated %}
                                    {% if user.is_teacher %} 

                                    
                                        {% get_com_is_reading user as boolean_reader %}
                                        {% if not boolean_reader %}        
                                            <div id="advises" class="advises">
                                                <div class="row"> 
                                                    <div class="col-xs-12 col-md-12 col-lg-12">
                                                        <h1 class="sacado" >Notre actu.</h1>
                                                        <form action="#" method="POST" style="display:inline">
                                                        <a href="#" id="reader_new"   class="btn btn-danger" >
                                                            J'ai lu l'actu. proposée
                                                        </a>
                                                        </form>

                                                    </div>
                                                </div>
                                                <div class="row" id ="principal_section"> 
                                                    <div class="col-xs-12 col-md-12 col-lg-12">
                                        
                                                            {% for c in communications %}
                                                                <h5> {{ c.subject }} <span class="pull-right">{{ c.today|date:"d N Y" }}</span></h5>
                                                                {{ c.texte|safe }}
                                                                <hr>
                                                            {% endfor %}
                                                    </div>
                                                </div>
                                            </div> 
                                        {% endif %}

                                    {% elif user.is_student %} 
                                        <a href="#" data-toggle='modal' data-target='#video_sacado' class="btn btn-violet" style="color:#FF0000; font-size:14px; margin-left: 100px"> 
                                            <i class="fa fa-play"></i> Sacado en vidéo
                                        </a>
                                    {% endif %}
                                {% endif %}
                        {% endblock %}
                            <a href="#" id="mobile_version_button" class="mobile_version pull-right"><i class="fa fa-bars"></i></a>
                        </div>
                        <ul class="nav navbar-nav navbar-right">
                        {% block page_menu_right %}
                            {% if request.user.is_authenticated %}
                                {% if user.is_teacher %} 
                                    <li>
                                        <a href="#" data-toggle='modal' data-target='#tutos_sacado' class="btn btn-outline-danger" >
                                            Les tutos en vidéo
                                        </a>
                                    </li>
                                {% endif %}
                            {% endif %}  
                            <form method="post"  enctype='multipart/form-data' class="pull-right search_div" >{% csrf_token %}
                                <input type="hidden"  name="from" id="from" value="{% if '/dashboard'  in request.path %}1{% else %}0{% endif %}"  /> 
                                <input type="text"  name="search" id="search" class="form-control" placeholder="Recherche par code" /> 
                            </form>
                        {% endblock %}
                        </ul>
                    </div>
                </div>
            </nav> 
        </h1>
    </div>
        
    {%  block body %}
        <div class="content_list" id="search_result">
        {% if request.user.is_authenticated %}
            {% if user.is_teacher %}
                {% include 'dashboard_teacher.html' %}
            {% elif user.is_parent %}
                {% include 'dashboard_parent.html' %}
            {% else %}
                {% include 'dashboard_student.html' %}
            {% endif %}
        {% endif %}
        </div>
    {% endblock %}
</div>

<div class="modal fade" id="video_sacado" tabindex="-1" role="dialog" aria-labelledby="video_sacado">
    <div class="modal-dialog" role="document">
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button> 
                <h2  class='sacado'  >Sacado en vidéo</h2>
            </div>
            <div class="modal-body">
                <iframe width="560" height="315" src="https://www.youtube.com/embed/lWGv9cakIVI?start=31" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="tutos_sacado" tabindex="-1" role="dialog" aria-labelledby="tutos_sacado">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button> 
                <h2  class='sacado'  >Les tutos Sacado en vidéo</h2>
            </div>
            <div class="modal-body">
                {% include 'tutos_sacado.html' %}
            </div>
        </div>
    </div> 
</div>



<div class="modal fade" id="remediation_viewer" tabindex="-1" role="dialog" aria-labelledby="remediation_viewer">
    <div class="modal-dialog" role="document" style="width:70%">
        <div class="modal-content" >
            <div class="modal-body" style="min-height: 350px">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button> 
                <div id="remediation_shower"> 
                    <div id="loader_shower"></div>
                </div> 
            </div>
        </div>
    </div>
</div>

{%  if user.is_teacher %}
    {%  if communications|length > 0  %}
    <div class="modal fade" id="nouveaute" tabindex="-1" role="dialog" aria-labelledby="nouveaute" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h2 class="sacado" >Notre actu.</h2>
                </div>
                <div class="modal-body">
                    {% for c in communications %}
                        <h5> {{ c.subject }} <span class="pull-right">{{ c.today|date:"d N Y" }}</span></h5>
                        {{ c.texte|safe }}
                        <hr>
                    {% endfor %}
                    <div class="text-center">
                        <a href="#"  class="btn btn-default" class="close" data-dismiss="modal" aria-label="Close">Fermer</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {%  endif  %}
    {% if 'qcm/' in request.path and not 'qcm/show' in request.path  %}
        {% include 'qcm/order_list.html' %}
    {%  endif  %}
{%  endif  %}

<div class="notification-container dismiss" id="notification-account">
    <div class="row">
        <div class="col-lg-12 col-xs-12" style="text-align:center;">
            <a href="#" id="closeAccount" class="pull-right"> <i class="fa fa-times"></i></a>
            <h1 class='sacado'>Mon compte</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12" style="text-align:center;">
            <p style="font-size:20px; padding-bottom: 20px;">{{ request.user.get_full_name|title }}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12" style="text-align:center;">
            <a href="{% url 'logout' %}" class="btn btn-default">Se déconnecter</a>
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-lg-12 col-xs-12" style="padding-top: 10px;">
            <a href="{% url 'profile' %}" class="{% if not user.country and user.user_type == 2 %} text-danger{% endif %}">Profil & Notification {% if not user.country and user.user_type == 2  %} <br/> > Renseigner le pays{% endif %}</a> 
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12" style="padding-top: 10px;">
            <a href="{% url 'updatepassword' %}">Changer mon mot de passe</a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12" style="padding-top: 10px;">
            <a href="{% url 'close_my_account' %}">Clôturer mon compte</a>
        </div>
    </div>

    {%  if request.user.is_student %}
        <hr>
        <div class="row">
            <div class="col-lg-12 col-xs-12" style=" padding-top: 10px;">
                {% for g in groups %}
                <li class="sanspuce"><a href="{% url 'dashboard_group' g.id %}"><i class="fa fa-square" style="color:{{ g.subject.color }}"></i> {{ g.subject.shortname }}  <small class="pull-right">({{ g.level.name }})</small></a></li>
                {% endfor %}
            </div>
        </div>
        <hr>
        {% comment 'utilisable ?' %}
        <!-- Atribution de groupe ??? de matière ???
        <div class="row">
            <div class="col-lg-12 col-xs-12" style=" padding-top: 5px;">
                <a href="#" id="aggregate_groupe">
                    <small> S'attribuer une matière</small>
                </a>
            </div>
        </div>
        <div id="aggregate_form">
            <form action="{%  url 'aggregate_group' %}" method="POST">
                {% csrf_token %}
                <div class="row">
                    <div class="col-lg-12 col-xs-12" style=" padding-top: 10px;">
                        <input type="text" class="form-control" placeholder="Code du groupe" name="groupe" id="id_groupe"/>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-8 col-xs-8" style=" padding-top: 10px;">
                        <input type="submit" class="btn btn-primary" value="Associer"/>
                    </div>
                    <div class="col-lg-4 col-xs-4" style=" padding-top: 10px;">
                        <span class="verif_course"></span>
                    </div>
                </div>
            </form>
        </div> 
        <hr>
        <div class="row">
            <div class="col-lg-12 col-xs-12" style=" padding-top: 10px;">
                <a href="#" id="aggregate_parcours">Rejoindre un parcours</a>
            </div>
        </div>
        <div id="aggregate_parcours_form">
            <form action="{%  url 'aggregate_parcours' %}" method="POST">
                {% csrf_token %}
                <div class="row">
                    <div class="col-lg-12 col-xs-12" style=" padding-top: 10px;">
                        <input type="text" class="form-control" placeholder="Code du parcours" name="parcours"
                               id="id_parcours"/>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-8 col-xs-8" style=" padding-top: 10px;">
                        <input type="submit" class="btn btn-primary" value="Associer"/>
                    </div>
                    <div class="col-lg-4 col-xs-4" style=" padding-top: 10px;">
                        <span class="verif_parcours"></span>
                    </div>
                </div>
            </form>
        </div> -->
        {% endcomment  %}
    {% else %}
        <div class="row">
            <div class="col-lg-12 col-xs-12" style="padding-top: 10px;">
                <a href="{% url 'profile' %}">Notifications</a>
            </div>
        </div><hr>
    {% endif %}

    
    {% if today %}
    <div class="row">
        <div class="col-lg-12 col-xs-12" style="text-align: center">
            {{ today|date:"d N Y" }}, {{ today|date:"H:i:s" }}
        </div>
    </div>
    {% endif %}
    <hr>
</div>

<div class="notification-container dismiss" id="notification-tools">
    <div class="row">
        <div class="col-lg-12 col-xs-12" style="text-align:center;">
            <a href="#" id="closeTools" class="pull-right"> <i class="fa fa-times"></i></a>
            <h1 class='sacado'>Mes outils péda.</h1>
        </div>
    </div>
    <hr class="divider"> 
    <p class="thin">Diaporamas & Quizz </p>
    
  
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{%  url 'list_diaporama' %}" >Mes diaporamas (<small class="text-danger">en test</small>)</a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{%  url 'list_quizzes' %}"   >Mes quizz (<small class="text-danger">en test</small>)</a>
        </div>
    </div>



    <hr class="divider"> 
    <p class="thin">Mes outils péda. <a href="{% url 'list_tools' %}" class="pull-right"  > Choisir  </a></p>
    <form method="post" action="#">
        <div id="list_of_tools">
        {% for tool in mytools %}
            <div class="row" id="delete_my_tool{{ tool.id }}">
                <div class="col-lg-12 col-xs-12">
                    <a href="{% url 'show_tool' tool.id %}">{{ tool.title }}</a>
                    <a href="#" data-tool_id="{{ tool.id }}" class="delete_my_tool pull-right"><small><i class="fa fa-trash"></i></small></a>
                </div>            
            </div>
        {% endfor %}
        </div>
    </form>
</div>

<div class="notification-container-right dismissR" id="notification-perso">
    <div class="row">
        <div class="col-lg-12 col-xs-12" id="detail_of_student">
        </div>
    </div>
</div>

{%  if request.user.is_superuser %}
<div class="notification-container dismiss"  id="notification-admin">
    {%  if user.is_manager  %}
        <div class="row">
            <div class="col-lg-12 col-xs-12"> 
                <a href="{% url 'admin_tdb' %}">{{ request.user.school.name }}</a>
            </div>  
        </div> 
        <hr class="divider">
    {% endif %}
    <p class="thin">Création </p>
 
    {% for level in levels %}
        <div class="row" style="font-size: 12px">
            <div class="col-lg-3 col-xs-3">
                <small>{{ level.shortname }} </small> 
            </div>           
            <div class="col-lg-4 col-xs-4">
                <img src="{% static 'img/ggb.png' %}" width="15px"> <a href="{% url 'admin_supportfiles' level.id  %}">Support</a>  
            </div>  
            <div class="col-lg-3 col-xs-3"> 
                <a href="{% url 'admin_associations'  level.id  %}">Exercices   </a> 
            </div> 
            <div class="col-lg-1 col-xs-1"> 
                 <a href="{% url 'admin_qrandom'  level.id  %}">QA   </a> 
            </div> 
        </div>
    {% endfor %} 
    <hr class="divider">
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <small><a href="{% url 'admin_testeur' %}">Reporting et tests</a></small>
        </div>
    </div>
    <hr class="divider">
    <p class="thin">Gestion SACADO </p> 
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{% url 'levels' %}">Niveaux</a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{% url 'themes' %}">Thèmes</a> ,  <a href="{% url 'waitings' %}">Attendus</a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{% url 'knowledges' %}">Savoir faire</a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{% url 'skills' %}">Compétences</a>
        </div>
    </div>
    <hr class="divider">
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{% url 'schools' %}">Etablissements </a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{% url 'list_teacher' %}">Enseignants </a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{% url 'communications' %}">Communications </a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{% url 'send_to_teachers' %}">Contacts </a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{% url 'gestion_files' %}">Gestions des fichiers </a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{% url 'demands' %}">Demandes d'exercices {% if nb_demand > 0 %} <i class="fa fa-circle text-danger" style="font-size:10px"></i> {% endif %} </a>
        </div>
    </div>
    <hr class="divider">
    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{% url 'advises' %}">Modèles et aides </a>
        </div>
    </div>
 

    <hr class="divider">
    <p class="thin">L'asso SACADO </p>

    <div class="row">
        <div class="col-lg-12 col-xs-12">
            <a href="{% url 'association_index' %}">Tableau de bord </a>
        </div>
    </div>
</div>
{%  elif request.user.is_extra %}
<div class="notification-container dismiss"  id="notification-admin">
    {%  if request.user.is_manager  %}
        <div class="row">
            <div class="col-lg-12 col-xs-12"> 
                <a href="{% url 'admin_tdb' %}">{{ request.user.school.name }}</a>
            </div>  
        </div> 
        <hr>
    {% endif %}


        <h2 class="thin">Création </h2>
 
        <hr class="divider">

 
        <div class="row">
            <div class="col-lg-12 col-xs-12">
                <a href="{% url 'create_qrandom' %}">Questions aléatoires</a>
            </div>
        </div>
        <hr class="divider">


        {% for level in levels %}
            <div class="row" style="font-size: 12px">
                <div class="col-lg-7 col-xs-7">
                    {{ level.shortname }} <a href="{% url 'admin_supportfiles' level.id  %}">Fichiers support</a>  
                </div>  
                <div class="col-lg-5 col-xs-5"> 
                        <img src="{% static 'img/ggb.png' %}" width="15px"> <a href="{% url 'admin_associations'  level.id  %}">Exercices   </a> 
                </div>      
            </div>
        {% endfor %}    
</div>
{% endif %}



{% block require %}
        <script src="{% static 'js/require.js' %}" data-main="{% static 'js/common3_mini.js' %}"></script>  
{% endblock %}
 
<script>
   require(['script/ajax-dashboard']);
</script>  
 

{% block python_js %}
{% endblock %}


</body>
</html>