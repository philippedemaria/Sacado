{% extends 'dashboard.html' %}
{% load widget_tweaks %}
{% load static %}

    {% block require %}

        {% if teacher %}
        <script src="{% static 'js/require.js' %}"   data-main="{% static 'js/common3.js' %}"></script>
        {% else %}
        <script src="{% static 'js/require.js' %}" data-main="{% static 'js/common-index.js' %}"></script> 
        {% endif %}
    {% endblock %}



{% block page_title %}<i class="fa fa-user"></i> 
    {% if new %}
        Nouvel.le enseignant.e
    {% else %}
        Mon profil {% if teacher and request.user.is_superuser %} de {{ teacher.user.last_name}} {{ teacher.user.first_name}} {% endif %}
    {% endif %}
{% endblock %}
 
{% block page_menu_right %}
    <li> <a href="{% url 'register_by_csv' 2 0 %}" class="btn btn-new"  > + Enseignant.e.s par csv</a></li>
{% endblock %}


{% block body %}
 
    <section class="content_main">
        <form action="" method="POST">
            {% csrf_token %}
            <div class="row">
                <div class="col-sm-12 col-md-4">
                    <div class="form-group">
                        <label>{{ user_form.username.label_tag }}</label>
                        {{ user_form.username |add_class:"form-control" }}
                        {{ user_form.username.errors }}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-md-2">
                    <div class="form-group">
                        <label>{{ user_form.civilite.label_tag }}</label>
                        {{ user_form.civilite  |add_class:"form-control select2" }}
                        {{ user_form.civilite.errors }}
                    </div>
                </div>
                <div class="col-sm-12 col-md-5">
                    <div class="form-group">
                        <label>{{ user_form.last_name.label_tag }}</label>
                        {{ user_form.last_name  |add_class:"form-control" }}
                        {{ user_form.last_name.errors }}
                    </div>
                </div>
                <div class="col-sm-12 col-md-5">
                    <div class="form-group">
                        <label>{{ user_form.first_name.label_tag }}</label>
                        {{ user_form.first_name  |add_class:"form-control" }}
                        {{ user_form.first_name.errors }}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-md-6">
                    <div class="form-group">
                        <label>{{ user_form.email.label_tag }}</label>
                        {{ user_form.email  |add_class:"form-control" }}
                        {{ user_form.email.errors }}
                    </div>
                </div>

                <div class="col-sm-12 col-md-6">
                    <div class="{% if teacher.levels.all.count == 0 %} alert alert-danger{% else %}form-group{% endif %}">
                        <label>{{ user_form.time_zone.label_tag }}{% if teacher.levels.count == 0 %} <i class="fa fa-warning"></i> Renseigner{% endif %}</label> 
                        {{ user_form.time_zone  |add_class:"form-control select2" }}
                        {{ user_form.time_zone.errors }}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-md-6">
                    <div class="{% if teacher.levels.all.count == 0 %} alert alert-danger{% else %}form-group{% endif %}">
                        <label>{{ teacher_form.levels.label_tag }} {% if teacher.levels.count == 0 %} <i class="fa fa-warning"></i> Renseigner{% endif %} </label>
                        {{ teacher_form.levels  |add_class:"form-control select2" }}
                        {{ teacher_form.levels.errors }}
                    </div>
                </div>
                <div class="col-sm-12 col-md-6">
                    <div class="form-group">
                        <div class="alert alert-info">
                             <small>Choisir votre ou vos niveaux préférés qui apparaitront dans votre espace personnalisé. Sans choix, vous ne pouvez pas sélectionner d'exercices.</small>
                        </div>
                    </div>
                </div>

            </div> 
 
            <div class="row">
                <div class="col-sm-12 col-md-6">
                    <div class="form-group">
                    Notifications
                        <table class="table">
 
                            <tr>
                                <td><small><em>Recevoir chaque fois qu'un élève effectue une tache ?</em></small></td>
                                <td>{{ teacher_form.notification |attr:"data-toggle:toggle" |attr:"data-onstyle:primary"|attr:"data-offstyle:default"|attr:"data-on:Oui"|attr:"data-off:Non"}}    
                                    {{ teacher_form.notification.errors }}
                                </td>                            
                            </tr>
                            <tr>
                                <td><small><em>Recevoir lorsqu'un exercice d'un de mes niveaux préférés est mis en ligne ?</em></small></td>
                                <td>{{ teacher_form.exercise_post |attr:"data-toggle:toggle" |attr:"data-onstyle:primary"|attr:"data-offstyle:default"|attr:"data-on:Oui"|attr:"data-off:Non"}}    
                                    {{ teacher_form.exercise_post.errors }}
                                </td>                            
                            </tr>
                        </table>

                    </div>
                </div>

                {% if request.user.is_superuser %}
                <div class="col-sm-12 col-md-6">                 
                    <div class="alert alert-danger"> 
                        <h4 cLass="thin">Partie admin</h4>

                        <div class="form-group">
                            <label>Administrateur établissement ?</label>
                            {{ user_form.is_manager |attr:"data-toggle:toggle" |attr:"data-onstyle:primary"|attr:"data-offstyle:default"|attr:"data-on:Oui"|attr:"data-off:Non"  }}
                            {{ user_form.is_manager.errors }}
                        </div>
                        <div class="form-group">
                            <label>Etablissement </label><a href="{% url 'create_school' %}" class="pull-right" style="font-size: 12px">+ Nouvel établissement</a>
                            {{ user_form.school|add_class:"form-control select2"   }}
                            {{ user_form.school.errors }}
                        </div>
                    </div>
                </div>
                {% endif  %}






 
            </div>
 

            <div class="row" style="margin-top:40px">
                    <div class="col-sm-12 col-md-8">
                        <div class="form-group">
                            <input value="Enregistrer" type="submit" class="btn btn-primary"/>
                            <a href="javascript:history.back()">
                                <input type="button" value="Annuler"
                                       class="btn btn-default "/>
                            </a>
                        </div>   
                    </div>
            </div>

        </form>
    </section>
 
{% endblock %}

 
