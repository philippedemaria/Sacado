{% extends 'dashboard.html' %}
{% load widget_tweaks %}
{% load static %}
{% load item_tags %}

{% block require %}
 

    <script src="{% static 'js/require.js' %}"   data-main="{% static 'js/common3.js' %}"></script>

    <script>
        require(['script/ajax-parcours']);
    </script> 
{% endblock %} 


 

{% block page_title %}
<span style="color:{{ parcours.color }}"><i class="fa fa-desktop"></i> </span>

    {% include 'qcm/breadcrumb.html' %}

<small >{{ nb_exercises }} exercice{{ nb_exercises|pluralize }}</small> </span>
{% endblock %}




{% block page_menu_right %}

    {% include 'qcm/submenu_parcours.html' %}
 
{% endblock %}

 

{% block body %}

<style type="text/css">
body{
    overflow: hidden;
}  

#response_div{
    display:none;
}
</style>

{% include 'preloader.html' %}
<div class="row" id="response_div">
    <div class="col-sm-12 col-md-12">
        <div class="alert alert-success" id="response">Votre commentaire audio est enregistré</div>
    </div>
</div>
<form action="" methode="POST">      
<section class="content_list exercise_sortable" id="miseEnAttenteDashboard">

<input type="hidden" value="{{ parcours.id }}" name="parcours" id="parcours"/>
    {% for relation in relationships %}
        {%  if relation.exercise.supportfile.is_title %}     
            <h2 class="listing thin" style="padding-left: 30px; width:100%; clear:both"> 
                {% if relation.is_header_of_section  %}
                    <a href="#" data-toggle='modal' data-target='#head_of_section'    data-relation_id='{{ relation.id }}'  class="header_shower" title="Cours associé à cette section">{{ relation.exercise.supportfile.annoncement|cleanhtml|capfirst }} <sup><i class="fa fa-desktop" style="font-size: 9px"></i></sup></a>
                {% else %}
                    {{ relation.exercise.supportfile.annoncement|cleanhtml|capfirst }}
                {% endif %}
            </h2>
        {%  elif relation.exercise.supportfile.is_subtitle %}
            <h3 class="listing thin" style="padding-left: 30px; width:100%; clear:both"> 
                {% if relation.is_header_of_section %}
                    <a href="#" data-toggle='modal' data-target='#head_of_section'  data-relation_id='{{ relation.id }}' class="header_shower" title="Cours associé à cette sous-section">{{ relation.exercise.supportfile.annoncement|cleanhtml|capfirst }} <sup><i class="fa fa-desktop" style="font-size: 9px"></i></sup></a>
                {% else %}
                    {{ relation.exercise.supportfile.annoncement|cleanhtml|capfirst }}
                {% endif %}
            </h3>
        {% else %}  
            {% include 'qcm/details_card.html' %}
        {% endif %}  
 

    {% endfor %}



    {% for customexercise in customexercises %}
        {% include 'qcm/details_card_custom.html' %}
    {% endfor %}


    {% if customexercises|length == 0 and relationships|length == 0 %}

        <div class="row">
            <div class="col-sm-3 col-md-3" style="margin:40px">
            <a href="{% url 'peuplate_parcours' parcours.id   %}" class="btn btn-danger"> Associer des exercices SACADO à {% if parcours.is_evaluation %} cette évaluation {% else %} ce parcours{% endif %}</a>  
            </div> 
            <div class="col-sm-3 col-md-3" style="margin:40px">
            <a href="{% url 'parcours_create_custom_exercise' parcours.id 0  %}" class="btn btn-danger"> Créer un exercice personnalisé dans {% if parcours.is_evaluation %} cette évaluation {% else %} ce parcours{% endif %}</a>  
            </div> 
        </div> 

    {% endif %}



    {% if teacher.user.school %}
    <div class="row">
        <div class="col-sm-12 col-md-12">
            <div class="form-group">
                {% if parcours.teacher != teacher %}<a href="{% url 'clone_parcours' parcours.id %}" class="btn btn-sacado">Cloner ce parcours</a>    {% endif %} 
                <input type="button" value="Retour" class="btn btn-default" onclick="javascript:history.back()"/>
            </div>
        </div>
    </div>  
    {% endif %}  

</section>
</form>

 
 
<div class="modal fade" id="head_of_section" tabindex="-1" role="dialog" aria-labelledby="head_of_section">
    <div class="modal-dialog" role="document"  style="width:95%;">
        <div class="modal-content" style="padding-top :0px;">
            <div class="modal-header">
                <h3>Cours associé
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button> 
                </h3>
            </div>
            <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-12 col-xs-12">   
                              <div id="courses_from_section"></div>
                        </div>   
                    </div> 
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="remediation" tabindex="-1" role="dialog" aria-labelledby="remediation">
    <div class="modal-dialog" role="document">
        <div class="modal-content" >
             
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button> 
                <h2  class='sacado'  >Ajouter un audio, un fichier, une vidéo, une méthode,...</h2>
            </div>
            <div class="modal-body">
                <div id="remediation_form">
                </div>
                 <div class="row audio" id="audio" >
                    <form enctype="multipart/form-data" action="" method="post">                    
                        <div class="col-sm-12 col-md-12"> 
                            <label>Audio</label>           
                            <div class="form-group">
                                <div id="controls">
                                    <button type="button" id="recordButton" class="btn btn-danger"><i class="fa fa-microphone"></i></button>
                                    <button type="button" id="pauseButton" disabled  class="btn btn-default"><i class="fa fa-pause"></i> </button>
                                    <button type="button" id="stopButton" disabled  class="btn btn-default"><i class="fa fa-stop"></i></button>
                                </div>
                                <div id="formats"></div>
                                <label><small>Vous pouvez vous enregistrer plusieurs fois pour déterminer la meilleure prise.</small></label>
                                <ol id="recordingsList"></ol>
                                <!-- inserting these scripts at the end to be able to use all the elements in the DOM  -->
                                <script src="https://cdn.rawgit.com/mattdiamond/Recorderjs/08e7abd9/dist/recorder.js"></script>
                                <script src="{% static 'js/script/recorder_voice.js' %}"></script>
                            </div>
                        </div>                
                        <input name="id_relationship" id="id_relationship" type="hidden" />
                        <input name="id_parcours" id="id_parcours" type="hidden" value="{{ parcours.id }}" />
                    </form>                    
                </div> 
            </div>
        </div>
    </div>
</div>



{% endblock %}

 
 
 
 