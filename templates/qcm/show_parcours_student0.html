{% extends 'dashboard.html' %}
{% load widget_tweaks %}
{% load static %}
{% load item_tags %}

{% block require %}
 
    {% if parcours %}
    <script src="{% static 'js/require.js' %}"   data-main="{% static 'js/common3.js' %}"></script>
    {% else %}
    <script src="{% static 'js/require.js' %}"   data-main="{% static 'js/common2.js' %}"></script>
    {% endif %}

    <script>
        require(['script/ajax-parcours']);
    </script> 

{% endblock %} 





 
 

{% block page_title %}
<span  style="color:{{ parcours.color }}"> <i class="fa fa-map"></i>   {{ parcours }} 
 
 
<img src="{% static 'img/angle-right.png' %}"/> 
<small class="thin">{{ nb_exercises }} exercice{{ nb_exercises|pluralize }}</small> </span>
{% endblock %}

{% block page_menu_right %}
    <li><a href="javascript:history.back()"><input type="button" value="Retour"  style="margin-top:-8px;margin-left:15px;padding:7px;font-size:18px;font-weight: 100"  class="btn btn-default "/></a></li>
{% endblock %}

 

{% block body %}
 
      
<section class="content_list"> 

    {% for data in relationships %}
        {%  if data.levela.exercise.supportfile.is_title %}       
            <h2 class="listing thin" style="width:100%; clear:both"> {{ data.levela.exercise.supportfile.annoncement|cleanhtml|capfirst }}</h2>
            {% for lb in data.levelb %}  
                {%  if lb.exercise.supportfile.is_subtitle %}
                    <h3 class="listing thin" style="width:100%; clear:both"> {{ lb.exercise.supportfile.annoncement|cleanhtml|capfirst }}</h3>
                    {% for lc in lb.levelc %}  
                        <div class="card" >
                            <div class="card-body">
                                <span style="font-size: 40px; padding-left:3px;float:left; padding-top: 10px;">{{ forloop.counter}}.</span> 
                                    <div class="card-score-student"  >
                                        {%  get_last_score_and_time   lc.exercise    student    as    data %}
                                            {% if data.score %}
                                                <span class="markdown
                                                        {% if data.score < 30 %}
                                                         red 
                                                        {% elif data.score < 60 %}
                                                        orange
                                                        {% elif data.score < 80 %}
                                                        green
                                                        {% else %}
                                                        darkgreen
                                                        {% endif %}">
                                                    {{ data.score }}
                                                </span> <font style="font-size:10px">{{ data.time}}</font>
                                            {% else %}
                                                <span class="markdown"> 
                                                      {{ data.score }}
                                                </span>
                                            {% endif %}
                                    </div>
                                    {% if lc.calculator %}
                                      <img src="{% static 'img/calculator.png' %}" class="pull-right" width="35px" />
                                    {% else %}
                                      <img src="{% static 'img/no_calculator.png' %}" class="pull-right"   width="35px" />
                                    {% endif  %}  
                            </div>                    
                            <div class="card-image">
                                {% if student %}
                                <a href="{% url 'show_this_exercise'  lc.exercise.id   %}">  <img src="../../../static/uploads/{{ lc.exercise.supportfile.imagefile }}" class="image_parcours"   ></a>
                                {% else %}
                                <a href="#" class="detail_parcours"  data-exercise_id="{{ lc.exercise.id }}"  data-num_exo="{{ forloop.counter}}"
                                                           data-parcours_id="{{ parcours.id }}">
                                                            <img src="../../../static/uploads/{{ lc.imagefile }}" class="image_parcours"   >
                                                           </a> 
                                {% endif  %}


                                <div class="card-text" style="background-color:{{ parcours.color }}">
                                    <i class="fa fa-barcode"></i> {{ lc.exercise.supportfile.code }}  
                                    <i class="fa fa-clock-o"></i> {{ lc.exercise.supportfile.duration }} min.
                                    <i class="fa fa-save"></i> {{ lc.exercise.supportfile.situation}}
                                </div>
                            </div>
                        </div> 
                        {% if forloop.counter|divisibleby:"4"  %}
                            <div style="clear:both"></div>
                        {% endif %} 

                    {% endfor %}
                {%  else %}
                    <div class="card" >
                        <div class="card-body">
                            <span style="font-size: 40px; padding-left:3px;float:left; padding-top: 10px;">{{ forloop.counter}}.</span> 
                                <div class="card-score-stuent">
                                        {%  get_last_score_and_time   lb.exercise    student    as    data %}
                                            {% if data.score  %}
                                                <span class="markdown
                                                        {% if data.score < 30 %}
                                                         red 
                                                        {% elif data.score < 60 %}
                                                        orange
                                                        {% elif data.score < 80 %}
                                                        green
                                                        {% else %}
                                                        darkgreen
                                                        {% endif %}">
                                                    {{ data.score }}
                                                </span> <font style="font-size:10px">{{ data.time}}</font>
                                            {% else %}
                                                <span class="markdown"> 
                                                      {{ data.score }}
                                                </span>
                                            {% endif %}
                                </div>
                                {% if lb.exercise.supportfile.calculator %}
                                  <img src="{% static 'img/calculator.png' %}" class="pull-right" width="35px" />
                                {% else %}
                                  <img src="{% static 'img/no_calculator.png' %}" class="pull-right"   width="35px" />
                                {% endif  %}  
                        </div>                    
                        <div class="card-image">
                            {% if student %}
                            <a href="{% url 'show_this_exercise'  lb.exercise.id   %}">  <img src="../../../static/uploads/{{ lb.exercise.supportfile.imagefile }}" class="image_parcours"   ></a>
                            {% else %}
                            <a href="#" class="detail_parcours"  data-exercise_id="{{ lb.exercise.id }}"    data-num_exo="{{ forloop.counter}}"
                                                       data-parcours_id="{{ parcours.id }}">
                                                        <img src="../../../static/uploads/{{ lb.exercise.supportfile.imagefile }}" class="image_parcours"   >
                                                       </a> 
                            {% endif  %}
                            <div class="card-text" style="background-color:{{ parcours.color }}">
                                <i class="fa fa-barcode"></i> {{ lb.exercise.supportfile.code }}  
                                <i class="fa fa-clock-o"></i> {{ lb.exercise.supportfile.duration }} min.
                                <i class="fa fa-save"></i> {{ lb.exercise.supportfile.situation}}
                            </div>
                        </div>
                    </div> 
                    {% if  forloop.counter|divisibleby:"4"  %}
                            <div style="clear:both"></div>
                    {% endif %} 
                {% endif %}                    
            {% endfor %}
        {%  else %}

            {%  for la in data.levela %} 
            <div class="card" >
                <div class="card-body">
                    <span style="font-size: 40px; padding-left:3px;float:left; padding-top: 10px;">{{ forloop.counter}}.</span> 
                        <div class="card-score-student">
                            {%  get_last_score_and_time    la.exercise   student    as    data  %}
                            {% if data.score %}
                                <span class="markdown
                                        {% if data.score < 30 %}
                                         red 
                                        {% elif data.score < 60 %}
                                        orange
                                        {% elif data.score < 80 %}
                                        green
                                        {% else %}
                                        darkgreen
                                        {% endif %}">
                                    {{ data.score }}%
                                </span> <font style="font-size:10px">{{ data.time}}</font>
                            {% else %}
                                <span class="markdown"> 
                                      {{ data.score }}
                                </span>
                            {% endif %}
                        </div>
                        {% if  la.exercise.supportfile.calculator %}
                          <img src="{% static 'img/calculator.png' %}" class="pull-right" width="35px" />
                        {% else %}
                          <img src="{% static 'img/no_calculator.png' %}" class="pull-right"   width="35px" />
                        {% endif  %}  
                </div>                    
                <div class="card-image">

                    {% if student %}
                    <a href="{% url 'show_this_exercise'  la.exercise.id   %}">  <img src="../../../static/uploads/{{  la.exercise.supportfile.imagefile }}" class="image_parcours"   ></a>
                    {% else %}
                    <a href="#" class="detail_parcours"  data-exercise_id="{{  la.exercise.id }}"    data-num_exo="{{ forloop.counter}}"
                                               data-parcours_id="{{ parcours.id }}">
                                                <img src="../../../static/uploads/{{  la.exercise.supportfile.imagefile }}" class="image_parcours"   >
                                               </a> 
                    {% endif  %}

                    <div class="card-text" style="background-color:{{ parcours.color }}">
                        <i class="fa fa-barcode"></i> {{  la.exercise.supportfile.code }}  
                        <i class="fa fa-clock-o"></i> {{  la.exercise.supportfile.duration }} min.
                        <i class="fa fa-save"></i> {{  la.exercise.supportfile.situation}}
                    </div>
                </div>
            </div> 
            {% if  forloop.counter|divisibleby:"4"  %}
                    <div style="clear:both"></div>
            {% endif %} 
            {% endfor %} 



        {% endif %}          

    {% endfor %}

 


</section>
 
   
{% endblock %}

 
 
 
 