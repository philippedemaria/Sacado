{% extends 'qcm/form_parcours.html' %}
{% load widget_tweaks %}
{% load static %}
{% load item_tags %}

{% block require %}
 
    {% if parcours %}
    <script src="{% static 'js/require.js' %}"   data-main="{% static 'js/common4.js' %}"></script>
    {% else %}
    <script src="{% static 'js/require.js' %}"   data-main="{% static 'js/common2.js' %}"></script>
    {% endif %}

    <script>
        require(['script/ajax-parcours']);
    </script> 


{% endblock %} 


{% block page_title %}
    {% if parcours %}
        <span style="color:{{ parcours.color|contrast_color_title }}"><i class="fa fa-trophy"></i> {{ parcours }}    </span>   <small><img src="{% static 'img/angle-right.png' %}"/> Modification</small>   
    {% else %}
       <i class="fa fa-trophy"></i> Nouvelle évaluation
    {% endif %}

{% endblock %}


{% block info %} 
<div class="row" style="font-size: 20px">
    <div class="col-sm-12 col-md-12">
        <div class="alert alert-info">
            <i class="fa fa-warning"></i> Pour associer une évaluation à un groupe, tout ou partie, il faut cocher <strong>au moins</strong> un élève de ce groupe. Une fois l'évaluation créée, vous pourrez choisir ses exercices via l'interface de l'évaluation depuis l'un des groupes associés. 
            <br>Si l'évaluation ne contient aucun élève, elle est accessible depuis la rubrique <i class="fa fa-th"></i> Parcours ou via le taleau de bord : Mes parcours et évaluations non affectés.
        </div>
    </div>
</div> 
{% endblock %}




{% block evaluation %}
            <table class="table">
                <tr>
                    <td>{{ form.duration.label_tag }} </td>
                    <td>{{ form.duration |add_class:"form-control"|attr:"placeHolder:15:00"|attr:"required"}}</td>
                    <td>{{ form.duration.errors}}</td>
                </tr>
                <tr>
                    <td>Date de publication</td>
                    <td>{{ form.start|add_class:"form-control datepicker"|attr:"required"}}</td>
                    <td></td>
                </tr>
                <tr>
                    <td>{{ form.starter.label_tag }} </td>
                    <td>{{ form.starter |add_class:"form-control"|attr:"placeHolder:15:00"|attr:"required"}}</td>
                    <td>{{ form.starter.errors}}</td>
                </tr>
                <tr>
                    <td colspan="3"><small>Pour dépublier, compléter les champs suivants</small></td>
                </tr>
                <tr>
                    <td>{{ form.stop.label_tag }}</td>
                    <td>{{ form.stop|add_class:"form-control datepicker"|attr:"required"}}</td>
                    <td>{{ form.stop.errors}}</td>
                </tr>
                <tr>
                    <td>{{ form.stopper.label_tag }} </td>
                    <td>{{ form.stopper  |add_class:"form-control"|attr:"placeHolder:16:00"|attr:"required"}}</td>
                    <td>{{ form.stopper.errors}}</td>
                </tr>
            </table>
        <div class="alert alert-info" {% if not  parcours.is_evaluation %} id="explain_evaluation" {% endif %} >
            La durée de l'évaluation est la somme des durées de chaque exercice + le temps de chargement (à renseigner en minutes)
        </div>
{% endblock %}


      
 
{% block save_evaluation %}
<div class="row" style="margin-top:40px">
    <div class="col-sm-12 col-md-8">
        <div class="form-group">
            <input value="Enregistrer cette évaluation" type="submit" class="btn btn-primary"/>

            <input value="Enregistrer cette évaluation et choisir les exercices" type="submit" name="save_and_choose" class="btn btn-primary"/>

            <a href="javascript:history.back()"><input type="button" value="Annuler"
                                                       class="btn btn-default "/></a>
        </div>
    </div> 

    <div class="col-sm-12 col-md-4">
    {% if parcours %}
            <a href="{% url 'delete_parcours' parcours.id  idg  %}" class="btn btn-danger"  onclick="return TestDelete('cette évaluation')"> 
                <i class="fa fa-trash"> </i>   Supprimer
            </a>
    {% endif %}  
    </div>
</div>  
{% endblock %}