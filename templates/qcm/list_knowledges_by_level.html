{% extends 'dashboard.html' %}

{% load widget_tweaks %}
{% load static %}
{% load item_tags %}


   
{% block require %}
    <script src="{% static 'js/require.js' %}"   data-main="{% static 'js/common2.js' %}"></script>

    <script>
        require(['script/list_knowledge_by_level']);
    </script> 


{% endblock %} 

  
{% block page_title %}
       <i class="bi bi-motherboard"></i> {% include 'qcm/breadcrumb.html' %}  Les savoir faire visés dans le test de positionnement
{% endblock %}

{% block page_menu_right %}


{% endblock %}


{% block body %}
<section class="content_main">

    <div class="row">
        <div class="col-sm-12 col-md-12">
            Sélectionner les savoir faire {% if get_target %}<b>visés</b> par le{% else %}<b>pré-requis</b> pour bien démarrer ce{% endif %} parcours.
        </div>
    </div>

    <form method="POST">
        {% csrf_token %}
        <div class="row">
            <div class="col-sm-12 col-md-12">
                <table class="table table-hover display1000" style="width:100%">
                    <thead>
                        <tr>
                            <td></td>
                        </tr>
                    </thead>
                    <tbody>                    
                    {% regroup exercises by theme as theme_list %} 
                    {% for theme in theme_list  %} 
                        <tr class="title_tr">
                            <td style="width:85%"> {{theme.grouper.name}}</td> 
                        </tr> 
                        {% regroup theme.list by knowledge.waiting as waiting_list %} 
                        {% for waiting in waiting_list  %}
                            <tr  class="opener out subtitle_tr"  id="{{ waiting.grouper.id }}">
                                <td style="width:85%"><i class="fa fa-caret-right"></i> {{waiting.grouper.name}}  {% if not get_target %} <small><b>{{  waiting.grouper.nb_questions }} question{{ waiting.grouper.nb_questions|pluralize  }}</b>  </small> {% endif %}</td> 
                            </tr>  
                            {% regroup waiting.list by knowledge as knowledge_list %} 
                            {% for knowledge in knowledge_list  %}
                                {% if knowledge_list|length > 0 %}
                                        <tr   class="opener_k opened{{ waiting.grouper.id }} out subsubtitle_tr"  id="{{ knowledge.grouper.id}}" >
                                            <td class="listingtd"> 
                                               <label><input name="knowledge_id" type="checkbox" value="{{ knowledge.grouper.id }}" {% if knowledge.grouper.id in parcours.testtraining.targets|splitter or  knowledge.grouper.id in parcours.testtraining.requires|splitter %}checked{% endif %} /> {{ knowledge.grouper.name|capfirst }} {% if not get_target %}<b><small> {{  knowledge.grouper.nb_questions  }} question{{  knowledge.grouper.nb_questions|pluralize }} </small></b>{% endif %}</label>
                                            </td>
                                        </tr>
                                {% else %}
                                        <tr class="opener_k opened{{ waiting.name.id }} out"  id="{{ knowledge.name.id}}" >
                                            <td>
                                                 {{ knowledge.name }} <em class="text text-danger">Exercice en cours de création</em>
                                            </td>
                                        </tr>
                                {% endif %}
                            {% endfor %}

                        {% endfor %}
                    {% endfor %} 
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 col-md-12">
                <input value="{% if get_target %}Choisir les pré-requis{% else %}Créer le test de positionnement{% endif %}" type="submit"  class="btn btn-primary"  />
            </div>
        </div>
    </form>
</section> 
{% endblock %}
                                