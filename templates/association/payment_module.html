{% load static %}
{% load item_tags %}

<script src="https://www.paypal.com/sdk/js?client-id=AbJcY8NVnL9ejW_BRR3RiV_8oK9PF7leWCi0pPwoGGboUZ5y1hl2Z-09NUaSRJe-JVTIuzX7VTcznaoa&currency=EUR" 
        data-client-token="{{ school.id }}" 
        data-order-id="{{ accounting.id }}"
        data-sdk-integration-source="button-factory"></script>

<script>

    var amount = "{{ school.fee|decimal2number }}";


        paypal.Buttons({
          style: {
            shape: 'rect',
            color: 'blue',
            layout: 'vertical',
            label: 'paypal',
            
          },
          createOrder: function(data, actions) {
            return actions.order.create({
              purchase_units: [{"amount":
                                  {
                                    "currency_code":"EUR",
                                    "value": amount ,
                                  },
                              }] ,
            });
          },

          onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
              alert("coquin") ;
              alert('Transaction en cours');

            });
          },

          onError: function(err) {
            console.log(err);
          }
        }).render('#paypal-button-container');
       
</script>
 