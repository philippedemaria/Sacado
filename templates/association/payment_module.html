{% load static %}
{% load item_tags %}

<script src="https://www.paypal.com/sdk/js?client-id=AbJcY8NVnL9ejW_BRR3RiV_8oK9PF7leWCi0pPwoGGboUZ5y1hl2Z-09NUaSRJe-JVTIuzX7VTcznaoa&currency=EUR" data-sdk-integration-source="button-factory"></script>

<script>

    var amount = "{{ school.fee|decimal2number }}";
    var school_id = "{{ school.id }}";
    var accounting_id = "{{ accounting.id }}";

        paypal.Buttons({
          style: {
            shape: 'rect',
            color: 'blue',
            layout: 'vertical',
            label: 'paypal',
            
          },

          createOrder: function(data, actions) {
            return actions.order.create({
              purchase_units: [{"amount":
                                  {
                                    "currency_code":"EUR",
                                    "value": amount ,
                                  },
                                "custom_id":school_id,
                                "reference_id":accounting_id,

                                }] ,
            });
          },

          onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {

              alert('Transaction en cours');

            });
          },

          onError: function(err) {
            console.log(err);
          }
        }).render('#paypal-button-container');
       
</script>
 