{% extends 'dashboard.html' %}
{% load static %}
{% load item_tags %}
{% load widget_tweaks %}
 
{% block require %}
    <script src="{% static 'js/require.js' %}"   data-main="{% static 'js/common2.js' %}"></script>

    <script>
        require(['script/ajax-quizz-list']);
    </script> 

{% endblock %}



{% block page_title %}
    <span class="sacado_color_text"><i class="fa fa-cubes"></i></span>  Mes quizz {% if is_archive %}archivés{% endif %}
{% endblock %}

{% block page_menu_right %}
    <li>
        {% if sacado_asso %} 
            {% if not is_archive %}
                <a href="{% url 'all_quizzes_archived' %}"  class="no_button"><i class="fa fa-archive"></i> Mes quizz archivés ({{ nba }})</a> 
            {% else %}
                <a href="{% url 'list_quizzes' %}"  class="no_button" >Mes quizz  </a> 
            {% endif %}

        {% else %}
            <a href="#"  class="no_sacado_asso" >{% if not is_archive %}<i class="fa fa-archive"></i>{% endif %} Mes quizz {% if not is_archive %}archivés{% endif %}</a> 
        {% endif %} 
    </li>
    
    {% include 'tool/submenu_creation_quizz.html' %}

{% endblock %}




{% block body %}
<section class="content_main">

    <form action="{% url 'quizz_actioner' %}" method="POST" enctype='multipart/form-data'>    

    {% csrf_token %}

    <div class="row">
        <div class="col-xs-6 col-md-3 ">
            <h2 class="thin"><i class="fa fa-folder sacado_color_text"></i>  Dans les dossiers</h2>
        </div>

        <div class=" col-xs-6 col-md-9">
            <div class="form-group">
                <input type="search" id="accordion_search_bar" class="form-control" placeholder="Ecrire un mot comme 'numérique' proposera les dossiers le contenant.">
            </div>
        </div>
    </div>

    {% for list_folder   in list_folders %} 
    <div class="row">
        <div class="col-md-12 col-xs-12">
            <div class="panel-group_list" id="accordion" role="tablist" aria-multiselectable="true">
                <div class="panel panel-default" id="collapse{{ forloop.counter }}_container">
                    <div class="panel-heading" role="tab" id="heading{{ forloop.counter }}">
                        <h4 class="panel-title">
                        <a role="button" 
                         data-toggle="collapse" 
                         data-parent="#accordion" 
                         href="#collapse{{ forloop.counter }}" 
                         aria-expanded="true" 
                         aria-controls="collapse{{ forloop.counter }}">


                         {% if list_folder.folder.vignette %}
                            <img src="{{ list_folder.folder.vignette.url }}" width="50px" height="50px">
                         {% else %}  
                            <i class="fa fa-square" style="font-size: 2.4em; color:{{ list_folder.folder.color }}"></i>
                         {% endif %}  



                         {{ list_folder.folder.title }} <i class="fa fa-angle-down"></i>

                         <span style="font-size: 2em; opacity: 0.1;font-weight: 800;position: absolute;left:60%" class="pull-right">{{ list_folder.folder.subject }}  </span>

                         <span style="font-size: 2em; opacity: 0.1;font-weight: 800" class="pull-right">{{ list_folder.folder.level.name }} </span>




                        </a>
                        </h4>
                    </div> 
                    <div id="collapse{{ forloop.counter }}" class="panel-collapse collapse out" role="tabpanel" aria-labelledby="heading{{ forloop.counter }}">
                        <div class="panel-body">         
                            <table class="table table-hovered standard_tab_10"  style="width:100%" >
                                <thead> 
                                    <tr> 
                                        <th style="width:30px;text-align: center"></th>
                                        <th style="width:30px;text-align: center"></th>
                                        <th>Titre</th>
                                        <th>Parcours</th>
                                        <th style="width:200px">Groupes</th>
                                        <th>  </th>
                                    </tr> 
                                </thead>
                                <tbody>
                                    {% for quizz  in list_folder.quizzes  %} 
                                        <tr class="edit"> 
                                            {% include 'tool/quizz_data.html' %}
                                        </tr>
                                    {% endfor %}              
                                 </tbody>
                            </table>
                            <div class="row" style="margin-top:10px">
                                <div class="col-sm-12 col-md-12">
             
                                    <button class="btn btn-default" name="action" value="archiver" onclick="return TestArchive('ces évaluations')"> 
                                        <i class="fa fa-archive"> </i>  {% if 'archive' in request.path %} Désarchiver {% else %} Archiver {% endif %}  la sélection
                                    </button>
                   

                                    <button class="btn btn-default" name="action" value="deleter" onclick="return TestDelete('ces évaluations')"> 
                                        <i class="fa fa-trash"> </i>   Supprimer la sélection
                                    </button>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

 

        <div class="row">
            <div class="col-sm-12 col-md-12">
                <table class="table table_list table-hover display_no_details100">
                    <thead>
                    <tr>
                        <th style="width:30px;text-align: center"></th>
                        <th style="width:30px;text-align: center"></th>
                        <th>Titre</th>
                        <th>Parcours</th>
                        <th style="width:400px">Groupes</th>
                        <th>  </th>
                    </tr>
                    </thead>
                    <tbody>
                        {% for quizz in quizzes %}            
                            <tr>
                                {% include 'tool/quizz_data.html' %}
                            </tr>
                        {% endfor %} 
                    </tbody>
                </table>
            </div>
        </div>

     

        <div class="row">
            <div class="col-sm-12 col-md-12">
                <button class="btn btn-default" name="action" value="archiver" onclick="return TestArchive('ces quizz')"> 
                    <i class="fa fa-archive"> </i>   Archiver la sélection
                </button>
                <button class="btn btn-default" name="action" value="deleter" onclick="return TestDelete('ces quizz')"> 
                    <i class="fa fa-trash"> </i>   Supprimer la sélection
                </button>
         
                <a href="javascript:history.back()"  class="btn btn-default " >Retour </a>
            </div>
        </div>







    </form>
</section>


<div class="modal fade" id="quizz_choice" tabindex="-1" role="dialog" aria-labelledby="quizz_choice">
    <div class="modal-dialog" role="document" style="width: 750px;">
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button> 
                <h1 class='thin'>Nouveau quizz</h1>
            </div>
            <div class="modal-body">
                <form action="{% url 'create_quizz' %}" method="POST"  enctype='multipart/form-data'>
                    {% include 'tool/form_quizz_items.html' %}
                </form>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="historic_modal" tabindex="-1" role="dialog" aria-labelledby="historic_modal">
    <div class="modal-dialog" role="document" style="width: 750px;">
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button> 
                <h1 class='thin'>Historique des questions</h1>
            </div>
            <div class="modal-body" id="body_gq">
 
            </div>
        </div>
    </div>
</div>

{% endblock %}